<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Walmart Parser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css" >
  <link rel="icon" href="assets/walmart.ico" type="image/x-icon">
</head>
<body>
  <header>
    <h1>Walmart Parser</h1>
    <p>Simple and effective Walmart scraper</p>
    <p>Version 0.2.1</p>
  </header>

<details class="accordion">
  <summary>Features</summary>
  <div class="content">
    <ul>
      <li>Search for products by UPC/EAN</li>
      <li>Saving results data to Excel</li>
      <li>Multithreading</li>
      <li>Easy to use interface</li>
    </ul>
  </div>
</details>

<details class="accordion">
  <summary>How to use</summary>
  <div class="content">
    <ol>
      <li>Launch the application</li>
      <li>Select search mode</li>
      <li>Select .csv or Excel-file with Product ID or UPC/EAN</li>
      <li>Press "Start"</li>
      <li>Open results in Excel</li>
    </ol>
  </div>
</details>

<details class="accordion">
  <summary>Screenshots</summary>
  <div class="content">
    <img src="assets/screen1.PNG" alt="Screenshot 1">
    <img src="assets/screen2.PNG" alt="Screenshot 2">
  </div>
</details>

<details class="accordion">
  <summary>FAQ</summary>
  <div class="content">
    <p><strong>Q: </strong><span class="Q">What input data is needed?</span><br>
       <strong>A: </strong>Just a list of product IDs or UPCs with prices.</p>
    <p><strong>Q: </strong><span class="Q">What results will I get?</span><br>
       <strong>A: </strong>Excel file with customizable columns.</p>
    <p><strong>Q: </strong><span class="Q">How fast is the parsing?</span><br>
       <strong>A: </strong>Around 100 products in 5 minutes.</p>
  </div>
</details>

<script>
  function setUniformImageHeights(images, maxCap = 500) {
    let maxHeight = 0;
    images.forEach(img => {
      if (img.naturalHeight > maxHeight) {
        maxHeight = img.naturalHeight;
      }
    });
    maxHeight = Math.min(maxHeight, maxCap);

    images.forEach(img => {
      img.style.height = maxHeight + "px";
      img.style.width = "auto";
    });
  }

  function expandContent(content) {
    content.style.transition = "none";
    content.style.maxHeight = "0";
    content.offsetHeight;
    content.style.transition = "max-height 0.4s ease";
    content.style.maxHeight = content.scrollHeight + "px";
  }

  window.addEventListener("load", () => {
    const detailsList = document.querySelectorAll("details.accordion");
    const allImages = document.querySelectorAll("img");

    // Після повного завантаження зображень — вирівнюємо висоти
    setUniformImageHeights(allImages);

    detailsList.forEach((el) => {
      const content = el.querySelector(".content");

      // Якщо відкрито під час завантаження — оновити maxHeight
      if (el.open) {
        expandContent(content);
      }

      el.addEventListener("toggle", () => {
        if (el.open) {
          // Після відкриття ще раз вирівняти висоти (на випадок, якщо запізнились)
          setUniformImageHeights(content.querySelectorAll("img"));
          expandContent(content);
        } else {
          content.style.maxHeight = "0";
        }
      });
    });
  });
</script>

  <footer>
    <a href="" target="_blank"></a>
  </footer>
</body>
</html>